<html>

<head>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Pending Questions</title>
    <link rel="icon" href="./../../../static/Apps_Logos/astro.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!--Replace with your tailwind.css once created-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</head>

<body>
    <nav class="navbar navbar-dark bg-black">
        <div style="padding-left:15px; padding-top:3px; padding-bottom:3px" class="container-fluid">
            <a class="navbar-brand" href="#">
                <img style="margin-right:20px" src="./../../../static/Apps_Logos/astro.png" alt="" width="60"
                    height="60" class="d-inline-block align-text-center">
                AstroDrishti
            </a>
        </div>
    </nav>
    {% for i in orderslist %}
    <div style="background-color: grey; margin:15px; border-radius:10px; padding:10px; border-color:black" class="">
        <p style="font-size: 22px; font-weight:500">
            Name: {{i["Name"]}}
            <!-- <small class="text-muted">{{i["Name"]}}</small> -->
        </p>
        <p style="font-size: 22px; font-weight:500">
            Question: {{i["Question"]}}
            <!-- <small class="text-muted">{{i["OID"]}}</small> -->
        </p>
        <div>
            <form action="/astrologer/answer/submission" method="post">
                <div class="row">
                    <div class="col">
                        <label style="font-weight: bold;">ORDER ID: </label>
                        <input style="padding: 10px; border-radius:8px" type="text" value="{{i['OID']}}" name="oid">
                    </div>
                    <div class="col">
                        <label style="font-weight: bold;">EMAIL ID:</label>
                        <input style="padding: 10px; border-radius:8px" type="text" value="{{i['Email']}}"
                            name="emailid">
                    </div>
                    <div class="col">
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-warning"
                            onclick='details(["{{i["Name"]}}","{{i["DOB"]}}","{{i["Birthtime"]}}","{{i["Lat"]}}","{{i["Lon"]}}"])'>
                            See Details
                        </button>

                        

                    </div>


                </div>
                <div style="margin-top:10px; margin-bottom:10px; margin-right:10px" class="input-group">
                    <span class="input-group-text">Answer</span>
                    <textarea rows="8" class="form-control" name="answer" aria-label="With textarea"></textarea>
                </div>
                <p hidden><input name="aid" value="{{i['astro_id']}}"></p>
                <p hidden><input name="isoffer" value="{{i['Type']}}"></p>
                <button type="submit" class="btn btn-success btn-lg">Submit</button>
            </form>

        </div>


    </div>
    {% endfor %}
    <script>
        var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
            return new bootstrap.Popover(popoverTriggerEl)
        })

        function details(data1) {
            let lat = data1[3];
            let lon = data1[4];
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", 'https://us1.locationiq.com/v1/reverse.php?key=4b811c0bc86e19&lat=' + lat + '&lon=' + lon + '&format=json', false); // false for synchronous request
            xmlHttp.send(null);
            var place = JSON.parse(xmlHttp.responseText).display_name;
            swal.fire("Date of Birth: " + data1[1] + "\n\n" + "Birth Time: " + data1[2] + "(24 HRS)" + "\n\nLAT: " + data1[3] + "\n\nLON: " + data1[4] + "\n\nPlace: " + place)
        }
        var myModal = document.getElementById('myModal')
        var myInput = document.getElementById('myInput')

        myModal.addEventListener('shown.bs.modal', function () {
            myInput.focus()
        })
    </script>
</body>

</html>